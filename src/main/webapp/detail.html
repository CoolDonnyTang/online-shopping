<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->

<title>爱购商城</title>

<!-- Bootstrap -->
<link href="resources/plugins/bootstrap/css/bootstrap.min.css"
	rel="stylesheet">
<link href="resources/my-css/index.css" rel="stylesheet">
<link href="resources/my-css/user-base.css" rel="stylesheet">
<link href="resources/my-css/detail.css" rel="stylesheet">
</head>
<body>
	<div class="page-header">
		<div class="container">
			<div class="row">
				<div class="col-md-2 heaer-menu">
					<a class="header-link" href="login.html">请登录</a>&nbsp;&nbsp;&nbsp;
					<a class="header-link" href="register.html">免费注册</a>
				</div>
				<div class="col-md-7"></div>
				<div class="col-md-1 heaer-menu">
					<div class="dropdown">
						<a id="dLabel1" data-target="#" href="#"
							data-toggle="dropdown" role="button" aria-haspopup="true"
							aria-expanded="false" class="header-link"> 我的爱购 <span
							class="caret"></span>
						</a>
						<ul class="dropdown-menu" aria-labelledby="dLabel1">
							<li><a class="link-hover">我的订单</a></li>
							<li><a class="link-hover">我的关注</a></li>
						</ul>
					</div>
				</div>
				<div class="col-md-1 heaer-menu">
					<div>
						<a href="login/shopping-cart.action" class="header-link">我的购物车 </a>
					</div>
				</div>
				<div class="col-md-1 heaer-menu">
					<div class="dropdown">
						<a id="dLabel3" data-target="#" href="http://example.com"
							data-toggle="dropdown" role="button" aria-haspopup="true"
							aria-expanded="false" class="header-link">联系客服 <span
							class="caret"></span>
						</a>
						<ul class="dropdown-menu" aria-labelledby="dLabel3">
							<li>028-12345678</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="row page-search">
			<div class="col-md-2">
				<div class="col-md-10">
					<a href="index.html" class="thumbnail activity-link"> <img
						src="resources/images/logo.png" class="logo">
					</a>
				</div>
			</div>
			<div class="col-md-8">
				<div class="col-md-8 col-md-offset-2">
					<div class="input-group">
						<input type="text" class="form-control" placeholder="商品搜索"
							aria-describedby="basic-addon2" style="border-color:red">
						<span class="input-group-addon serch-icon serch-icon_" id="basic-addon2">
							<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
						</span>
					</div>
				</div>
			</div>
			<div class="col-md-2">xx</div>
		</div>
		<div class="row">
			<div class="col-md-12 navigator">
				<div class="col-md-2 detail-header">
					<span class="header-content">商品详情</span>
				</div>
				<div class="col-md-1 detail-header-link">
					<a class="header-link">首页</a>
				</div>
				<div class="col-md-1 detail-header-link">
					<a class="header-link">食品</a>
				</div>
				<div class="col-md-1 detail-header-link">
					<a class="header-link">家电</a>
				</div>
				<div class="col-md-1 detail-header-link">
					<a class="header-link">数码</a>
				</div>
				<div class="col-sm-12 col-md-12 main-header">
					
				</div>
			</div>
		</div>
<!-- 商品主图片 -->
		<div class="row">
			<!-- 主图片区 -->
			<div class="col-sm-4 col-md-4 main-commodity-image" id="main-img-dis">
			    <div class="thumbnail " style="margin-bottom: 2px">
			      <img src="resources/images/activity-1.jpg" alt="" id="mainImage">
			    </div>
			    <!-- ---------------------------- -->
			    <div class="main-img-lis-con col-sm-12 col-md-12" id="main-img-list">
			    	<div class="thumbnail col-sm-3 col-md-3 main-img-lis">
				      <img src="resources/images/activity-1.jpg" alt="" id="mainImage">
				    </div>
				    <div class="thumbnail col-sm-3 col-md-3 main-img-lis">
				      <img src="resources/images/activity-1.jpg" alt="" id="mainImage">
				    </div>
				    <div class="thumbnail col-sm-3 col-md-3 main-img-lis">
				      <img src="resources/images/activity-1.jpg" alt="" id="mainImage">
				    </div>
				    <div class="thumbnail col-sm-3 col-md-3 main-img-lis">
				      <img src="resources/images/activity-1.jpg" alt="" id="mainImage">
				    </div>
			    </div>
			</div>
			<!-- 标题区 -->
			<div class="col-sm-8 col-md-8">
				<div class="col-sm-12 col-md-12">
					<h1 class="commodify-title" id="commTitle">标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题</h1>
				</div>
				<div class="col-sm-12 col-md-12 commodify-price">
					<div class="col-sm-10 col-md-10">
						<div class="price-content">
							<div class="col-md-2 text-right">库&nbsp;&nbsp;存：</div>
							<div class="col-md-2 price_" id="commInventory">189</div>
						</div>
						<div class="price-content">
							<div class="col-md-2 text-right">价&nbsp;&nbsp;格：</div>
							<div class="col-md-2 price_">￥<s id="marketPrice">189</s></div>
						</div>
						<div class="price-content">
							<div class="col-md-2 my-price-name text-right">爱购价：</div>
							<div class="col-md-2 my-price price_">￥<span id="myPrice">1233</span></div>
						</div>
					</div>
				</div>
				<!-- 属性 -->
				<div class="col-sm-12 col-md-12 commodify-attribute">
					<div class="col-sm-10 col-md-10">
						<div class="price-content">
							<div class="col-md-2 text-right" id="prop1Name">属性一：</div>
							<div class="col-md-8 price_" id="prop1Content">
								<button type="button" class="btn btn-default prop" disabled="disabled">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
							</div>
						</div>
						<div class="price-content" id="prop2-con">
							<div class="col-md-2 text-right" id="prop2Name">属性二：</div>
							<div class="col-md-8 price_" id="prop2Content">
								<button type="button" class="btn btn-default prop" disabled='disabled'>Default</button>
								<button type="button" class="btn btn-default prop" disabled="disabled">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
								<button type="button" class="btn btn-default prop">Default</button>
							</div>
						</div>
					</div>
				</div>
				<!-- 属性结束 -->
				<!-- 加入购物车开始 -->
				<div class="col-sm-12 col-md-12 commodify-attribute">
					<!-- 警告信息 -->
					<div class="col-sm-12 col-md-12 disMessage-container">
						<div class="alert alert-danger" role="alert" id="disMessage" style="display:none">测试</div>
					</div>
					<div class="col-sm-10 col-md-10">
						<div class="price-content">
							<div class="col-md-3 text-right">
								<div class="input-group" id="amountInputCon">
									<span class="input-group-addon amount-btn">-</span>
									<input type="text" class="form-control amount-input" value=1 id="amountInput"> 
									<span class="input-group-addon amount-btn">+</span>
								</div>
							</div>
							<div class="col-md-5 price_">
								<button type="button" class="btn btn-danger" id="addToShoppingCart">加入购物车</button>
							</div>
						</div>
					</div>
					<!-- 加入购物车结束 -->
				</div>
			</div>
		</div>
		<!-- 商品详情区开始 -->
		<div class="row">
			<div class="col-md-12 message-header">
				<ul class="nav nav-pills message-navigator" id=messageNavigator>
				  <li role="presentation" class="text-center message-navigator-activ">商品详情</li>
				  <li role="presentation" class="text-center">评论信息</li>
				  <li role="presentation" class="text-center">售后服务</li>
				</ul>
			</div>
			<div class="col-md-12 message-content">
				<!-- 详情区之商品详情 -->
				<div id="messageDetail"> <!-- style="display:none" -->
					<div class="message-detail col-md-12">
						品牌：&nbsp;&nbsp;<span id="brand">唐晏忍</span>
						<ul class="nav nav-pills mesage-list" id="params">
						  <li role="presentation" class="text-left col-md-3">我游戏基地上单兼你说的说你三十多年大神呢没得事得1</li>
						  <li role="presentation" class="text-left col-md-3">我游戏基地上单兼你说的说你三十多年大神呢没得事得2</li>
						  <li role="presentation" class="text-left col-md-3">我游戏基地上单兼你说的说你三十多年大神呢没得事得3</li>
						  <li role="presentation" class="text-left col-md-3">我游戏基地上单兼你说的说你三十多年大神呢没得事得4</li>
						  <li role="presentation" class="text-left col-md-3">我游戏基地上单兼你说的说你三十多年大神呢没得事得5</li>
						  <li role="presentation" class="text-left col-md-3">我游戏基地上单兼你说的说你三十多年大神呢没得事得6</li>
						</ul>
					</div>
					<div>
						<!-- 图片区开始 -->
						<ul class="col-md-12 main-images" id="detailImage">
							<li><img src="resources/images/login-background.jpg" class="col-md-12 image-display"></li>
							<li><img src="resources/images/activity-1.jpg" class="col-md-12 image-display"></li>
						</ul>
						<!-- 图片区结束 -->
					</div>
				</div><!-- 商品详情区结束 -->
				<!-- 售后详情开始 -->
				<div class="after-sale" style="display:none" id="afterSale">
					<div class="sale-header"><img src="resources/images/guarantee.png" class="sale-image"><b>全国联保</b></div>
					<div class="sale-message">
						<p>凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定三包售后服务），与您亲临商场选购的商品享受相同的质量保证。爱购商城还为您提供具有竞争力的商品价格和运费政策，请您放心购买！ </p>
					</div>
					<div class="sale-header"><img src="resources/images/return-goods.png" class="sale-image"><b>七天包退</b></div>
					<div class="sale-message">
						<p>凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定三包售后服务），与您亲临商场选购的商品享受相同的质量保证。爱购商城还为您提供具有竞争力的商品价格和运费政策，请您放心购买！ </p>
					</div>
				</div><!-- 售后详情结束 -->
				<!-- 评论详情开始 -->
				<div class="after-sale" style="display:none" id="commentContainer">
					<div class="media">
					  <div class="media-left">
					     <img class="media-object head-portrait" src="resources/images/head-portrait.png">
					  </div>
					  <div class="media-body comment">
					    <h4 class="media-heading">Middle aligned media</h4>
					    <p>凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定</p>
					  </div>
					</div>
					
					<div class="media">
					  <div class="media-left">
					     <img class="media-object head-portrait" src="resources/images/head-portrait.png">
					  </div>
					  <div class="media-body comment">
					    <h4 class="media-heading">Middle aligned media</h4>
					    <p>凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定</p>
					  </div>
					</div>
					
					<div class="media">
					  <div class="media-left">
					     <img class="media-object head-portrait" src="resources/images/head-portrait.png">
					  </div>
					  <div class="media-body comment">
					    <h4 class="media-heading">Middle aligned media</h4>
					    <p>凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定</p>
					  </div>
					</div>
					
					<div class="media">
					  <div class="media-left">
					     <img class="media-object head-portrait" src="resources/images/head-portrait.png">
					  </div>
					  <div class="media-body comment">
					    <h4 class="media-heading">Middle aligned media</h4>
					    <p>凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定</p>
					  </div>
					</div>
					
					<div class="media">
					  <div class="media-left">
					     <img class="media-object head-portrait" src="resources/images/head-portrait.png">
					  </div>
					  <div class="media-body comment">
					    <h4 class="media-heading">Middle aligned media</h4>
					    <p>凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定凭质保证书及爱购商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由爱购联系保修，享受法定</p>
					  </div>
					</div>
					
				</div><!-- 评论详情结束 -->
			</div>
		</div>
	</div>
	<hr />
	<div class="page-footer-body text-center">
		<ul class="footer-list">
			<li>关于我们</li>
			<li>联系我们</li>
			<li>亲情加盟</li>
			<li>商城社区</li>
			<li>我在中国</li>
			<li>友情链接</li>
		</ul>
	</div>
	<div class="page-copyright text-center">
		Copyright &copy; 2017 <strong>爱购商城i-go.shop</strong> 版权所有
	</div>
	<script src="resources/plugins/jquery-2.2.4.min.js"></script>
	<script src="resources/plugins/bootstrap/js/bootstrap.min.js"></script>
	<script src="resources/scripts/my-utils.js"></script>
	<script src="resources/scripts/detail-fun.js"></script>
	<script type="text/javascript"
		src="//at.alicdn.com/t/font_zcsipz08mj0b2o6r.js"></script>
	<script type="text/javascript">
		$(function(){
			var commData;
			var param =  window.atob(window.location.search.replace("?", ""));
			var data = {};
			data[param.substr(0, param.indexOf("=")).trim()] = param.substr(param.indexOf("=") + 1, param.indexOf("&")-param.indexOf("=")-1).trim();
			var commEntityId = parseInt(param.substr(param.lastIndexOf("=") + 1).trim());
			console.log(data);
			//发送请求加载数据
			$.ajax({
				data:data,
				dataType:"json",
				error:function(){
				
				},
				success:function(result){
					if(result.status === 1 && result.data !== null) {
						var data = result.data;
						commData = data;
						var selectEntity = null;
						//找到应该选中的实体的信息
						for(var i=0; i<data.commEntity.length; i++) {
							if(data.commEntity[i].id == commEntityId) {
								selectEntity = data.commEntity[i];
							}
						}
						/**
						*加载基本信息
						*/
						//加载标题
						$("#commTitle").text(data.titleName);
						//加载品牌
						$("#brand").text(data.brand);
						//加载详情图片
						$("#detailImage").html("");
						var detailImages = new Array(data.images.length);
						for(var j=0; j<data.images.length; j++) {
							detailImages[data.images[j].serialNumber-1] = $("<li><img src=" + data.images[j].url + " class='col-md-12 image-display'></li>");
						}
						for(var k=0; k<detailImages.length; k++) {
							$("#detailImage").append(detailImages[k]);
						}
						//加载属性
						var props = data.properties;
						if(props.length === 1) {
							//移除属性二
							$("#prop2-con").html("");
							//移除属性的选项
							$("#prop1Content").html("");
							$("#prop1Name").text(props[0].propertyName + ":");
							var propContent = props[0].propertyCotent.split(/\s+/);
							for(var propc=0; propc<propContent.length; propc++) {
								$("#prop1Content").append($(
										"<button type='button' class='btn btn-default prop'>" + propContent[propc] + "</button>"
									));
							}
						} else if(props.length === 2) {
							if(props[0].id<props[1].id) {
								/**设置属性一**/
								//移除属性的选项
								$("#prop1Content").html("");
								$("#prop1Name").text(props[0].propertyName + ":");
								var propContent = props[0].propertyCotent.split(/\s+/);
								for(var propc=0; propc<propContent.length; propc++) {
									$("#prop1Content").append($(
											"<button type='button' class='btn btn-default prop' disabled='disabled'>" + propContent[propc] + "</button>"
										));
								}
								/**设置属性二**/
								//移除属性的选项
								$("#prop2Content").html("");
								$("#prop2Name").text(props[1].propertyName + ":");
								var propContent2 = props[1].propertyCotent.split(/\s+/);
								for(var propc=0; propc<propContent2.length; propc++) {
									$("#prop2Content").append($(
											"<button type='button' class='btn btn-default prop' disabled='disabled'>" + propContent2[propc] + "</button>"
										));
								}
							} else {
								/**设置属性一**/
								//移除属性的选项
								$("#prop1Content").html("");
								$("#prop1Name").text(props[1].propertyName + ":");
								var propContent = props[1].propertyCotent.split(/\s+/);
								for(var propc=0; propc<propContent.length; propc++) {
									$("#prop1Content").append($(
											"<button type='button' class='btn btn-default prop' disabled='disabled'>" + propContent[propc] + "</button>"
										));
								}
								/**设置属性二**/
								//移除属性的选项
								$("#prop2Content").html("");
								$("#prop2Name").text(props[0].propertyName + ":");
								var propContent2 = props[0].propertyCotent.split(/\s+/);
								for(var propc=0; propc<propContent2.length; propc++) {
									$("#prop2Content").append($(
											"<button type='button' class='btn btn-default prop' disabled='disabled'>" + propContent2[propc] + "</button>"
										));
								}
							}
						}
						/***设置属性一哪些可点击***/
						//获取实体
						var entities = data.commEntity;
						for(var en=0; en<entities.length; en++) {
							//库存大于0
							if(entities[en].inventory>0) {
								//遍历属性一
								var prop1btn = $("#prop1Content button");
								for(var pb=0; pb<prop1btn.length; pb++) {
									//每个按钮
									var $btn = prop1btn.eq(pb);
									if($btn.text()===entities[en].propty1 || $btn.text()===entities[en].propty2) {
										$btn.removeAttr("disabled");
									}
								}
							}
						}
						/***显示指定的entity***/
						chooesEntity(data, commEntityId);
					} else {
						
					}
				},
				type:"post",
				url:"comm/findCommModelAndEntity.action"
			});
			//点击属性一的按钮
			$("#prop1Content").on("mousedown","button",function(e){
				//alert("ok");
				var $target = $(e.target);
				//如果点击的按钮不可点或已选中样式
				if($target.attr("disabled")==="disabled" || $target.hasClass("active-btn")) {
					return;
				}
				//清除属性二的选中状态
				$("#prop2Content button").removeClass("active-btn");
				//移除其它按钮的选中
				$("#prop1Content button").removeClass("active-btn");
				//console.log("www1");
				$target.addClass("active-btn");
				/***展示可选择的属性二按钮***/
				//获取实体
				var entities = commData.commEntity;
				//获取属性二
				var prop2btn = $("#prop2Content button");
				//每个按钮
				var $btn;
				//先设置属性二全部为不可点
				for(var p2b=0; p2b<prop2btn.length; p2b++) {
					prop2btn.eq(p2b).attr("disabled", "disabled");
				}
				//遍历商品实体
				for(var en=0; en<entities.length; en++) {
					//库存大于0,并且有一个属性为该按钮对应的 属性
					if(entities[en].inventory>0) {
						if(entities[en].propty1===$target.text()) {
							//遍历属性二
							for(var pb=0; pb<prop2btn.length; pb++) {
								//每个按钮
								$btn = prop2btn.eq(pb);
								if($btn.text()===entities[en].propty2) {
									$btn.removeAttr("disabled");
								}
							}
						} else if(entities[en].propty2===$target.text()) {
							//遍历属性二
							for(var pb=0; pb<prop2btn.length; pb++) {
								//每个按钮
								$btn = prop2btn.eq(pb);
								if($btn.text()===entities[en].propty1) {
									$btn.removeAttr("disabled");
								}
							}
						}
					}
				}
			});
			//点击属性二的按钮
			$("#prop2Content").on("mousedown","button",function(e){
				var $target = $(e.target);
				if($target.hasClass("active-btn") || $target.attr("disabled")==="disabled") {
					return;
				}
				//移除其它按钮的选中
				$("#prop2Content button").removeClass("active-btn");
				$target.addClass("active-btn");
				var nowEntityId = findEntityId(commData);
				chooesEntity(commData, nowEntityId);
			});
			//鼠标移入主图片列表则将显示的主图片换为该图片
			$("#main-img-list").on("mouseover","img", function(event){
				$target = $(event.target);
				$("#mainImage").attr("src",$target.attr("src"));
			});
			//点击切换评论和详情等信息
			$("#messageNavigator li").click(function(event){
				var $target = $(event.target);
				//移除选中样式
				$("#messageNavigator li").removeClass("message-navigator-activ");
				$target.addClass("message-navigator-activ");
				switch($target.text().trim()) {
					case "商品详情":
						chooseMessage(1);
						break;
					case "评论信息":
						chooseMessage(2);
						break;
					case "售后服务":
						chooseMessage(3);
						break;
				};
			});
			//鼠标移入检查是否选中商品模板
			$("#amountInput").focus(function(){
				if(findEntityId(commData)<0) {
					//获取属性1名字
					var prop1 = $("#prop1Name").text().trim().replace(":", "");
					//获取属性2名字
					var prop2 = $("#prop2Name").text().trim().replace(":", "");
					disMessage("请先选择 " + prop1 + " " + prop2);
					$("#amountInput").blur();
				}
			});
			//鼠标移除是验证输入数量的合法性
			$("#amountInput").change(function() {
				var value = $("#amountInput").val();
				if(!checkNum(value)) {
					disMessage("请输入正确的数量");
					$("#amountInput").val(1);
					return;
				}
				var num = parseInt(value);
				if(num>$("#commInventory").text()) {
					disMessage("数量不能大于库存");
					$("#amountInput").val($("#commInventory").text());
					return;
				}
				if(num>9999) {
					disMessage("数量不能大于 9999");
					$("#amountInput").val(9999);
					return;
				}
				if(num<1) {
					disMessage("数量不能小于 1");
					$("#amountInput").val(1);
					return;
				}
			});
			//点击 加 减 按钮改变数量
			$("#amountInputCon span").click(function(event){
				var $target = $(event.target);
				if($target.text().trim() === "+") {
					if(findEntityId(commData)<0) {
						//获取属性1名字
						var prop1 = $("#prop1Name").text().trim().replace(":", "");
						//获取属性2名字
						var prop2 = $("#prop2Name").text().trim().replace(":", "");
						disMessage("请先选择 " + prop1 + " " + prop2);
						return;
					}
					var num = parseInt($("#amountInput").val());
					if(num>=$("#commInventory").text()) {
						disMessage("数量不能大于库存");
						return;
					}
					if(num>=9999) {
						disMessage("数量不能大于 9999");
						return;
					}
					$("#amountInput").val(num+1);
				} else if($target.text().trim() === "-") {
					if(findEntityId(commData)<0) {
						//获取属性1名字
						var prop1 = $("#prop1Name").text().trim().replace(":", "");
						//获取属性2名字
						var prop2 = $("#prop2Name").text().trim().replace(":", "");
						disMessage("请先选择 " + prop1 + " " + prop2);
						return;
					}
					var num = parseInt($("#amountInput").val());
					if(num<=1) {
						disMessage("数量不能小于 1");
						return;
					}
					$("#amountInput").val(num-1);
				}
				
			});
			//点击加入购物车
			$("#addToShoppingCart").click(function(){
				//选择的实体的id
				var commEntityId = findEntityId(commData);
				//数量
				var amount = $("#amountInput").val();
				if(commEntityId<0) {
					//获取属性1名字
					var prop1 = $("#prop1Name").text().trim().replace(":", "");
					//获取属性2名字
					var prop2 = $("#prop2Name").text().trim().replace(":", "");
					disMessage("请先选择 " + prop1 + " " + prop2);
					return;
				}
				if(!checkNum(amount)) {
					disMessage("请输入正确的数量");
					return;
				}
				var param = window.btoa("commEntityId=" + commEntityId + "&amount=" + amount);
				window.location.href = "login/shopping-cart.action?" + param;
			});
			
			
		});
	</script>
</body>
</html>
